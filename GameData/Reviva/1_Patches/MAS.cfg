// This might not work depending on patching order...
@PART:HAS[@INTERNAL[JHTIVA]]
{
	Reviva_MAS_internalName = 
}

@PART[mk1-3pod]
{
	Reviva_MAS_internalName = MAS_Mk1-3
}

@PART[landerCabinSmall]
{
	Reviva_MAS_internalName = MAS_LanderCabinSmall_ASETinternal
}

@PART[mk1pod]
{
	Reviva_MAS_internalName = MAS_mk1PodCockpit
}

@PART[mk1pod_v2]
{
	Reviva_MAS_internalName = MAS_mk1pod_IVA
}

@PART[mrk-DM]
{
	Reviva_MAS_internalName = MAS_MRKinternal
}

// copy the MAS computer node from the base part, and rename it to MASFlightComputer so we can copy it into the subtype
@PART:HAS[#Reviva_MAS_internalName]:NEEDS[AvionicsSystems]:FIRST[Reviva]
{
	#/MODULE[MASFlightComputer] {}
	@MODULE[MASFlightComputer],-1
	{
		|_ = MASFlightComputer
	}
}

@PART:HAS[#Reviva_MAS_internalName]:NEEDS[AvionicsSystems]:FOR[Reviva]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[IVASwitch]]
	{
		SUBTYPE
		{
			name = MAS
			primaryColor = Avocado // Avacadonics
			secondaryColor = White
			descriptionSummary = MAS IVA
			descriptionDetail = MOARdV AvionicsSystems IVA.\n<color=green>Low Tech Analog</color>
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIVASwitch
				}
				DATA
				{
					%internalName = #$/Reviva_MAS_internalName$
					#/MASFlightComputer {}
				}
			}
		}
	}
}

@PART:HAS[#Reviva_MAS_internalName]:LAST[Reviva]
{
	-Reviva_MAS_internalName = 
	-MASFlightComputer {}
}